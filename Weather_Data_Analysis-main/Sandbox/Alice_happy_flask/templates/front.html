<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather history and seasons</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
    <h1>Get your weather history and seasons here!</h1>
    <p>
        Enter 2-country code into the first box,
        city (or city and state) into the second box,
        start date like 2023-05-04 into third box,
        and end date into fourth box.
        Then press the button and two links will appear below.
    </p>
    <div>
        <input id="country" type="text">
        <input id="location" type="text">
        <input id="start_date" type="text">
        <input id="end_date" type="text">
        <button id="get_links">1. Get Links!</button>
        <a id="history-link">Weather History</a>
        <a id="seasons-link">Seasons</a>
    </div>
    <script type="text/javascript">
        // getting references
        var country_field = d3.select("#country");
        var location_field = d3.select("#location");
        var start_date_field = d3.select("#start_date");
        var end_date_field = d3.select("#end_date");
        var the_button = d3.select("#get_links");
        var history_link_thing = d3.select("#history-link");
        var seasons_link_thing = d3.select("#seasons-link");

        // global variables to hold 4 inputs - i'm sure this is kludge
        var country_val = "";
        var location_val = "";
        var start_date_val = "";
        var end_date_val = "";

        // functions linking input fields to their variables
        country_field.on("change", function() {
            country_val = d3.event.target.value;
            console.log("country", country_val);
        });

        location_field.on("change", function() {
            location_val = d3.event.target.value;
            console.log("location", location_val);
        });

        start_date_field.on("change", function() {
            start_date_val = d3.event.target.value;
            console.log("start date", start_date_val);
        });

        end_date_field.on("change", function() {
            end_date_val = d3.event.target.value;
            console.log("end date", end_date_val);
        });

        // the function that fills urls
        the_button.on("click", function() {
            var urrl = country_val + "/" + location_val + "/" + start_date_val + "/" + end_date_val;
            history_link_thing.attr("href", "api/v1.0/history_loc/"+urrl );
            seasons_link_thing.attr("href", "seasons/"+urrl );
        });

    </script>

</body>
</html>